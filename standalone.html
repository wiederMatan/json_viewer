<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSON Viewer</title>
    <style>
/* Reset and base styles */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: Arial, sans-serif;
    background: #f5f0e8;
    color: #333;
    line-height: 1.6;
    min-height: 100vh;
}

/* Container */
.container {
    max-width: 100%;
    margin: 0;
    padding: 0;
}

/* Tabs */
.tabs {
    display: flex;
    background: #e8dfd0;
    border-bottom: 1px solid #d0c4b0;
}

.tab {
    padding: 8px 20px;
    background: transparent;
    border: none;
    border-right: 1px solid #d0c4b0;
    cursor: pointer;
    font-size: 14px;
    color: #333;
    transition: background 0.2s;
}

.tab:hover {
    background: #f0e8d8;
}

.tab.active {
    background: #f5f0e8;
    font-weight: normal;
}

/* Controls */
.controls {
    display: flex;
    gap: 0;
    background: #e8dfd0;
    padding: 8px;
    border-bottom: 1px solid #d0c4b0;
    flex-wrap: wrap;
}

.btn {
    padding: 6px 12px;
    background: #e8dfd0;
    border: 1px solid #d0c4b0;
    border-radius: 3px;
    font-size: 13px;
    cursor: pointer;
    transition: background 0.2s;
    color: #333;
    margin-right: 4px;
}

.btn:hover {
    background: #d8cfc0;
}

.btn:active {
    background: #c8bfb0;
}

.about-btn {
    margin-left: auto;
}

/* Tab content */
.tab-content {
    display: none;
    padding: 0;
}

.tab-content.active {
    display: block;
}

/* Input textarea */
#jsonInput {
    width: 100%;
    min-height: calc(100vh - 100px);
    padding: 15px;
    border: none;
    background: #f5f0e8;
    font-family: 'Courier New', Courier, monospace;
    font-size: 14px;
    resize: none;
    outline: none;
    color: #333;
}

#jsonInput::placeholder {
    color: #999;
}

/* JSON output */
#jsonOutput {
    width: 100%;
    min-height: calc(100vh - 100px);
    padding: 15px;
    background: #f5f0e8;
    font-family: 'Courier New', Courier, monospace;
    font-size: 14px;
    overflow: auto;
}

/* JSON Tree Styles */
.json-node {
    margin-left: 20px;
}

.json-node:first-child {
    margin-left: 0;
}

.json-line {
    padding: 2px 0;
}

.json-key {
    cursor: pointer;
    user-select: none;
    padding: 2px 0;
    display: flex;
    align-items: center;
}

.json-key:hover {
    background: #ede5d8;
}

.toggle {
    display: inline-block;
    margin-right: 8px;
    transition: transform 0.2s ease;
    color: #666;
    font-size: 12px;
}

.collapsible.expanded .toggle {
    transform: rotate(0deg);
}

.collapsible:not(.expanded) .toggle {
    transform: rotate(-90deg);
}

.collapsible:not(.expanded) + .json-content {
    display: none;
}

.key {
    color: #0451a5;
    font-weight: normal;
}

.value {
    font-weight: normal;
}

.value-string {
    color: #a31515;
}

.value-number {
    color: #098658;
}

.value-boolean {
    color: #0000ff;
}

.value-null {
    color: #0000ff;
}

.bracket {
    color: #000;
}

.count {
    color: #999;
    font-size: 12px;
    font-style: normal;
}

/* Error message */
.error {
    color: #d8000c;
    background: #ffd2d2;
    padding: 10px;
    border-radius: 3px;
    border-left: 3px solid #d8000c;
}

/* Scrollbar styling */
#jsonOutput::-webkit-scrollbar {
    width: 10px;
}

#jsonOutput::-webkit-scrollbar-track {
    background: #e8dfd0;
}

#jsonOutput::-webkit-scrollbar-thumb {
    background: #c8bfb0;
    border-radius: 5px;
}

#jsonOutput::-webkit-scrollbar-thumb:hover {
    background: #b8afa0;
}

/* Responsive design */
@media (max-width: 768px) {
    .controls {
        padding: 6px;
    }

    .btn {
        padding: 5px 10px;
        font-size: 12px;
    }

    #jsonInput,
    #jsonOutput {
        min-height: calc(100vh - 120px);
        font-size: 12px;
    }
}
    </style>
</head>
<body>
    <div class="container">
        <div class="tabs">
            <button class="tab active" data-tab="viewer">Viewer</button>
            <button class="tab" data-tab="text">Text</button>
        </div>

        <div class="controls">
            <button id="copyBtn" class="btn">Copy</button>
            <button id="formatBtn" class="btn">Format</button>
            <button id="removeWhitespaceBtn" class="btn">Remove white space</button>
            <button id="clearBtn" class="btn">Clear</button>
            <button id="aboutBtn" class="btn about-btn">About</button>
        </div>

        <div id="viewer-tab" class="tab-content active">
            <textarea id="jsonInput" placeholder="Paste the JSON code here (your code is not saved anywhere)"></textarea>
        </div>

        <div id="text-tab" class="tab-content">
            <div id="jsonOutput"></div>
        </div>
    </div>

    <script>
// JSON Viewer Script

const jsonInput = document.getElementById('jsonInput');
const jsonOutput = document.getElementById('jsonOutput');
const formatBtn = document.getElementById('formatBtn');
const clearBtn = document.getElementById('clearBtn');
const copyBtn = document.getElementById('copyBtn');
const removeWhitespaceBtn = document.getElementById('removeWhitespaceBtn');
const aboutBtn = document.getElementById('aboutBtn');

// Tab functionality
const tabs = document.querySelectorAll('.tab');
const viewerTab = document.getElementById('viewer-tab');
const textTab = document.getElementById('text-tab');

tabs.forEach(tab => {
    tab.addEventListener('click', () => {
        const tabName = tab.getAttribute('data-tab');

        // Remove active class from all tabs
        tabs.forEach(t => t.classList.remove('active'));

        // Add active class to clicked tab
        tab.classList.add('active');

        // Show/hide tab content
        if (tabName === 'viewer') {
            viewerTab.classList.add('active');
            textTab.classList.remove('active');
        } else {
            viewerTab.classList.remove('active');
            textTab.classList.add('active');
        }
    });
});

// Example JSON data
const exampleJSON = {
    "user": "matanwieder",
    "name": "John",
    "age": 30
};

// Copy button click handler
copyBtn.addEventListener('click', async () => {
    const inputText = jsonInput.value.trim();

    if (!inputText) {
        alert('No JSON to copy');
        return;
    }

    try {
        await navigator.clipboard.writeText(inputText);

        // Show feedback
        const originalText = copyBtn.textContent;
        copyBtn.textContent = 'Copied!';
        setTimeout(() => {
            copyBtn.textContent = originalText;
        }, 2000);
    } catch (error) {
        alert('Failed to copy to clipboard');
    }
});

// Format JSON button click handler
formatBtn.addEventListener('click', () => {
    const inputText = jsonInput.value.trim();

    if (!inputText) {
        alert('Please enter some JSON data');
        return;
    }

    try {
        const jsonData = JSON.parse(inputText);
        jsonInput.value = JSON.stringify(jsonData, null, 2);
        renderJSON(jsonData);

        // Switch to text tab to show the tree view
        tabs[1].click();
    } catch (error) {
        alert('Invalid JSON: ' + error.message);
    }
});

// Remove whitespace button click handler
removeWhitespaceBtn.addEventListener('click', () => {
    const inputText = jsonInput.value.trim();

    if (!inputText) {
        alert('Please enter some JSON data');
        return;
    }

    try {
        const jsonData = JSON.parse(inputText);
        jsonInput.value = JSON.stringify(jsonData);
    } catch (error) {
        alert('Invalid JSON: ' + error.message);
    }
});

// Clear button click handler
clearBtn.addEventListener('click', () => {
    jsonInput.value = '';
    jsonOutput.innerHTML = '';
});

// About button click handler
aboutBtn.addEventListener('click', () => {
    alert('JSON Viewer\n\nA simple tool for viewing and formatting JSON data.\n\nPaste your JSON, format it, and visualize it in a tree structure.');
});

// Render JSON as a tree structure
function renderJSON(data, container = jsonOutput) {
    container.innerHTML = '';
    const tree = createJSONTree(data);
    container.appendChild(tree);
}

// Create JSON tree element
function createJSONTree(data, key = null) {
    const div = document.createElement('div');
    div.className = 'json-node';

    const type = getType(data);

    if (type === 'object' || type === 'array') {
        const isArray = Array.isArray(data);
        const isEmpty = isArray ? data.length === 0 : Object.keys(data).length === 0;

        // Create collapsible header
        const header = document.createElement('div');
        header.className = 'json-key collapsible expanded';

        const toggle = document.createElement('span');
        toggle.className = 'toggle';
        toggle.textContent = 'â–¼';
        header.appendChild(toggle);

        if (key !== null) {
            const keySpan = document.createElement('span');
            keySpan.className = 'key';
            keySpan.textContent = `"${key}": `;
            header.appendChild(keySpan);
        }

        const bracket = document.createElement('span');
        bracket.className = 'bracket';
        bracket.textContent = isArray ? '[' : '{';
        header.appendChild(bracket);

        if (isEmpty) {
            const closeBracket = document.createElement('span');
            closeBracket.className = 'bracket';
            closeBracket.textContent = isArray ? ']' : '}';
            header.appendChild(closeBracket);
        } else {
            const count = document.createElement('span');
            count.className = 'count';
            count.textContent = ` ${isArray ? data.length : Object.keys(data).length} items `;
            header.appendChild(count);
        }

        div.appendChild(header);

        if (!isEmpty) {
            const content = document.createElement('div');
            content.className = 'json-content';

            if (isArray) {
                data.forEach((item, index) => {
                    const child = createJSONTree(item, index);
                    content.appendChild(child);
                });
            } else {
                const keys = Object.keys(data);
                keys.forEach((k) => {
                    const child = createJSONTree(data[k], k);
                    content.appendChild(child);
                });
            }

            const closeLine = document.createElement('div');
            closeLine.className = 'json-node';
            const closeBracket = document.createElement('span');
            closeBracket.className = 'bracket';
            closeBracket.textContent = isArray ? ']' : '}';
            closeLine.appendChild(closeBracket);
            content.appendChild(closeLine);

            div.appendChild(content);

            // Add toggle functionality
            header.addEventListener('click', () => {
                header.classList.toggle('expanded');
            });
        }
    } else {
        // Primitive value
        const line = document.createElement('div');
        line.className = 'json-line';

        if (key !== null) {
            const keySpan = document.createElement('span');
            keySpan.className = 'key';
            keySpan.textContent = `"${key}": `;
            line.appendChild(keySpan);
        }

        const valueSpan = document.createElement('span');
        valueSpan.className = `value value-${type}`;

        if (type === 'string') {
            valueSpan.textContent = `"${data}"`;
        } else if (type === 'null') {
            valueSpan.textContent = 'null';
        } else {
            valueSpan.textContent = String(data);
        }

        line.appendChild(valueSpan);
        div.appendChild(line);
    }

    return div;
}

// Get the type of a value
function getType(value) {
    if (value === null) return 'null';
    if (Array.isArray(value)) return 'array';
    if (typeof value === 'object') return 'object';
    if (typeof value === 'string') return 'string';
    if (typeof value === 'number') return 'number';
    if (typeof value === 'boolean') return 'boolean';
    return 'unknown';
}

// Show error message
function showError(message) {
    jsonOutput.innerHTML = `<div class="error">${message}</div>`;
}
    </script>
</body>
</html>
